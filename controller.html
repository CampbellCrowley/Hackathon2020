<html>
	<head>
		<title>Hello World</title>
	</head>
	
	<style>
	body {
		width: 45%;
		margin: 0 auto;
		font-size: 3em;
	}
	button {
		font-size: 1.5em;
	}
	</style>	
	<body><br>
		<img src="images/yaw.png" /><br>
		Yaw: <b id="yaw"></b><br>
		<img src="images/pitch.png" /><br>
		Pitch: <b id="pitch"></b><br>
		<img src="images/roll.png"/><br>
		Roll: <b id="roll"></b>
		<script src="/node_modules/socket.io-client/dist/socket.io.js"></script>
		<script>
			var alpha;
			var alphaTemp= 0;
			var beta;
			var betaTemp= 0;
			var gamma;
			var gammaTemp= 0;
			window.addEventListener("deviceorientation", handleOrientation);
			function handleOrientation(event)
			{
				alpha = event.alpha - 270;
				beta = event.beta;
				gamma = event.gamma;
				if (alphaTemp == 0)
				{
					document.getElementById("yaw").innerHTML = alpha;
				} else {
					document.getElementById("yaw").innerHTML = alpha - alphaTemp;
				}
				if (betaTemp == 0)
				{
					document.getElementById("pitch").innerHTML = beta;	
				} else {
					document.getElementById("pitch").innerHTML = beta - betaTemp;	
				}
				if (gammaTemp == 0)
				{
					document.getElementById("roll").innerHTML = gamma;	
				} else {
					document.getElementById("roll").innerHTML = gamma - gammaTemp;	
				}

				socket.emit('data', {
				alpha:alpha - alphaTemp,
				beta:beta - betaTemp,
				gamma:gamma - gammaTemp,
				});

			}
			function buttonClick(event)
			{
				alphaTemp = alpha +270;
				betaTemp = beta +270;
				gammaTemp = gamma +270;
			}
			const socket = io();
			socket.on('ping',  () =>  {
				console.log(" ping ")});
			socket.on('connect',  () =>  {
				socket.emit('identify', 'controller');
			});
		</script>
		<br><button onclick= "buttonClick()">Reset to 0</button><br>
	</body>

</html>
